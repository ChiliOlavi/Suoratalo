import{e as I,r as o,a as e,p as R,R as _}from"./pipelines-D4UI2vqV.js";I.allowRemoteModels=!0;const L="Xenova/bert-base-multilingual-cased",P=50;function f(t){return t.replace(/\[CLS\]/g,"").replace(/\[SEP\]/g,"").replace(/\[UNK\]/g,"").replace(/\s+/g," ").trim()}function v({initialText:t,modelName:d=L,topKPredictions:g=P}){const[x,s]=o.useState(t),[l,k]=o.useState(!0),[m,h]=o.useState(!1),u=o.useRef(null);o.useEffect(()=>{(async()=>{try{k(!0),u.current=await R("fill-mask",d),console.log(`Model "${d}" loaded.`)}catch(r){console.error("Failed to load pipeline:",r),s("Error loading model. Please check console.")}finally{k(!1)}})()},[d]);const E=o.useCallback(async()=>{if(l||m||!u.current)return;h(!0);const a=u.current;try{const r=t;let c=[...(await a.tokenizer(r,{addSpecialTokens:!0})).input_ids.data],i=[];for(let n=1;n<c.length-1;++n)i.push(n);let y=0;for(s(f(r));i.length>0&&y<20;){const n=i[Math.floor(Math.random()*i.length)],M=[...c];M[n]=a.tokenizer.mask_token_id;const S=await a.tokenizer.decode(M,{skipSpecialTokens:!1}),w=await a(S,{top_k:g});w.length>0&&(c[n]=w[0].token),i=i.filter(p=>p!==n),y+=1;const b=await a.tokenizer.decode(c,{skipSpecialTokens:!1});s(f(b)),await new Promise(p=>setTimeout(p,100))}const T=await a.tokenizer.decode(c,{skipSpecialTokens:!1});s(f(T))}catch(r){console.error("Error during text mixing:",r),s("Error mixing text. Please check console.")}finally{h(!1)}},[t,l,m,d,g]);return o.useEffect(()=>{!l&&u.current&&(s(t),E())},[t,l,E]),e.createElement("div",{className:"p-4 bg-gray-100 rounded-lg shadow-md mb-4"},l?e.createElement("p",{className:"text-blue-600"},"Loading AI model for mixing..."):m?e.createElement("p",{className:"text-green-700 font-medium animate-pulse"},x,e.createElement("span",{className:"ml-2 text-gray-500 text-sm"},"(Mixing...)")):e.createElement("p",{className:"text-gray-800"},x))}const z="Zyntex-Puuro is a mysterious porridge, rumored to have been invented in the basement kitchen of Hotelli Suoratalo. Its surface shimmers with an unnatural glow, and sometimes you can hear it whispering in the night. Locals say it tastes best at 3:17 AM, but only if you finish it before it tries to crawl off your plate.";_.createRoot(document.getElementById("text-mixer-root")).render(e.createElement(e.StrictMode,null,e.createElement(v,{initialText:z})));
